<%= content_for :title, 'Provider application flow' %>

<% content_for :before_content do %>
  <%= render SubNavigationComponent.new(items: [
    { name: 'Provider application flow', url: support_interface_provider_flow_path, current: true },
    { name: 'Candidate application flow', url: support_interface_candidate_flow_path },
    { name: 'When emails are sent', url: support_interface_when_emails_are_sent_path },
  ]) %>
<% end %>

<p class="govuk-body">
  This page documents the states and transitions that make up the Apply service, from the perspective of the provider.
</p>

<details class="govuk-details" data-module="govuk-details">
  <summary class="govuk-details__summary">
    <span class="govuk-details__summary-text">
      View full diagram
    </span>
  </summary>
  <div class="govuk-details__text">
    <%= StateDiagram.svg(only_from_state: nil, machine: ApplicationStateChange) %>
  </div>
</details>

<style>
  svg { max-width: 100%; }
</style>

<% ApplicationStateChange.workflow_spec.states.each do |_, state| %>
  <%= render SupportInterface::StateExplanationComponent.new(machine: ApplicationStateChange, state: state, development_details: true) %>
  <hr class='govuk-section-break govuk-section-break--xl govuk-section-break--visible'>
<% end %>
